<%= simple_form_for :search,
  :method => :get,
  :remote => true,
  :html => {
    :id => 'search_form',
  },
  :url => v2_search_search_path do |f|
%>
<div class="row show-advertisement">

  <!-- Left column (map, info, contact) -->
  <div class="column small-12 medium-3 large-3 left-column">

    <div class="row">
      <div class="column small-8 medium-12 large-12 small-order-1 medium-order-1 large-order-">

        <!-- Map -->
        <fieldset class="fieldset map-container">
          <div id='map' style="height: 300px;"></div><br>
          <legend id="user_location" data-geocode="<%= user_signed_in? ? current_user.geocode : Rails.application.config.classifeds_default_geocode %>">
            <i class="fi-marker"></i> <%= user_signed_in? ? current_user.location : Rails.application.config.classifeds_default_location %>
          </legend>

          <!-- Distance slider -->
          <div class="slider" id="radius-slider" data-slider data-initial-start="25" data-start="1" data-end="<%= Rails.application.config.classifeds_max_search_distance %>" data-step="5">
            <span class="slider-handle"  data-slider-handle role="slider" tabindex="1" aria-controls="search_distance"></span>
            <span class="slider-fill" data-slider-fill></span>
          </div>
          <div class="input-group">
            <span class="input-group-label">+</span>
            <%= f.input :distance,
            :label => false,
            :input_html => {
              class: "input-group-field",
              value: @distance_param
            } %>
            <div class="input-group-button">
              <input type="submit" class="button" value="km">
            </div>
          </div>
        </fieldset>

      </div>

      <div class="column small-4 medium-12 large-12 small-order-2 medium-order-3 large-order-">

        <!-- Type -->
        <fieldset class="fieldset information-container">
          <legend>Type</legend>
          <%=
            f.collection_check_boxes :types, Rails.application.config.classifeds_types, :to_s, :to_s, {
              :include_blank => false,
              :include_hidden => false,
              :selected => []
            }, {}
           %>
          </fieldset>

         <!-- Category -->
         <fieldset class="fieldset contact-container">
           <legend>Category</legend>
           <%=
             f.collection_radio_buttons :category_subcategory, Advertisement.categories_as_checkbox_collection, :to_s, :to_s, {
               :include_blank => true,
               :include_hidden => false,
               :selected => []
             }, {}
            %>
          </fieldset>

      </div>
    </div>
  </div>

  <!-- Center column (heading, emoji-reacts, content, emoji-react-info) -->
  <div class="column small-12 medium-expand large-expand center-column">

    <!-- Page title -->
    <div class="row">
      <div class="column expand">
        <div class="callout alert query-container">
          <%=
            f.input :query,
            :label => false,
            :input_html => {
              autofocus: true,
              value: @query_param
            }
          %>
        </div>
      </div>
    </div>

    <!-- Applied Filters -->
    <div class="row">
      <div class="column">
        <p id="js-applied-filters">
          <%= render 'v2_search/partials/applied_filters', location: @location_param, distance: @distance_param, types: @types_param, category: @categories_param %>
        </p>
      </div>
    </div>

    <!-- Results grid -->
    <div id="js-results-grid">
      <div class="js-gutter-sizer"/>
      <div id="js-results-cards">
        <%= render 'v2_search/partials/search_results', advertisements: @advertisements %>
      </div>
    </div>

  </div>
</div>
<% end %>
