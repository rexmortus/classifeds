// Type filters
var typesFilterContainer =          document.getElementById('js-type-filters');;
typesFilterContainer.innerHTML =    '<%= j render "v2_search/partials/type_filters", filters: @types_param %>'

// Category filters
var categoryFilterContainer =       document.getElementById('js-category-filters')
categoryFilterContainer.innerHTML = '<%= j render "v2_search/partials/category_filters", filters: @categories_param %>'

// Applied filters
var appliedFiltersContainers =      document.querySelectorAll('[data-applied-filters]');
appliedFiltersContainers.forEach(
  function(element) {
  element.innerHTML =               '<%= j render "v2_search/partials/applied_filters", location: @location_param, distance: @distance_param, types: @types_param, category: @categories_param %>'
})

// View type filter
var viewTypeFilterContainer =       document.querySelector('[data-view-type-toggle]');
viewTypeFilterContainer.innerHTML = '<%= j render "v2_search/partials/view_type_filters", view_type: @view_type_param %>'

// Map view container
<% if @view_type_param === 'map' %>

if (!window.mapView) {
  var resultsContainer =              document.getElementById('js-results-grid');
  resultsContainer.innerHTML =        '<%= j render "v2_search/partials/search_results", advertisements: @advertisements, view_type: @view_type_param %>'
  var event = new Event('initialise-map-view');
  window.dispatchEvent(event);
} else {
  var event = new Event('update-map-view');
  window.dispatchEvent(event);
}

<% else %>
var event = new Event('remove-map-view');
window.dispatchEvent(event);

var resultsContainer =              document.getElementById('js-results-grid');
resultsContainer.innerHTML =        '<%= j render "v2_search/partials/search_results", advertisements: @advertisements, view_type: @view_type_param %>'
<% end %>

<% if @view_type_param === 'masonry' %>
  var event = new Event('refresh-masonry-layout');
  window.dispatchEvent(event);
<% end %>
